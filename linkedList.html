<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>

<body>
    <header class="container">
        <h1>LinkedList</h1>
    </header>
    <main>
    </main>
</body>
<script src="https://unpkg.com/vue@next"></script>
<script>
    class Node {
        constructor(data) {
            this.data = data
            this.next = null
        }
    }
    class LinkedList {

        constructor() {
            this.head = null
            this.tail = null
            this.length = 0
        }

        appendFirst(value) {
            let node = new Node(value)
            node.next = this.head
            this.head = node
            if (this.isEmpty()) {
                this.tail = this.head
            }
            this.length++;
        }

        push(value) {
            let node = new Node(value)
            if (this.isEmpty()) {
                this.head = node
            } else {
                this.tail.next = node
            }
            this.tail = node
            this.length++;
        }

        add(value, index) {
            let node = new Node(value)
            let current = this.head
            let previous = null
            let count = 0

            while (current) {
                if (count + 1 === index) {
                    previous = current
                    current = current.next
                    node.next = current
                    previous.next = node
                }
                count++
                current = current.next
            }
            this.length++
        }

        remove(value) {
            if (this.isEmpty()) {
                return null
            }

            let current = this.head
            let previous = null
            while (current) {
                if (current.data === value) {
                    if (previous != null) {
                        previous.next = current.next
                        if (current.next === null) {
                            this.tail = previous
                        }
                    } else {
                        this.head = this.head.next
                        if (this.head === null) {
                            this.tail = null
                        }
                    }
                    this.length--
                    return true
                }
                previous = current
                current = current.next
            }
            return false
        }

        removeFirst() {
            if (this.isEmpty()) {
                return false
            }
            if (this.head === this.tail) {
                this.head = null
                this.tail = null
                this.length--
                return true
            } else {
                let current = this.head
                this.head = current.next
                this.length--
                return true
            }
            return false
        }

        removeLast() {
            if (this.isEmpty()) {
                return false
            }
            if (this.head === this.tail) {
                this.head = null
                this.tail = null
                this.length--
                return true
            } else {
                let current = this.head
                let previous = null
                while (current) {
                    if (current.next === this.tail) {
                        previous = current
                        break;
                    }
                    current = current.next
                }
                previous.next = null
                this.tail = previous
                this.length--
                return true
            }
            return false
        }

        clear() {
            while (this.length > 0) {
                this.removeLast()
            }
        }

        print() {
            let currnet = this.head
            while (currnet) {
                console.log(`${currnet.data}`)
                currnet = currnet.next
            }
        }

        isEmpty() {
            return this.length === 0
        }

        getFirstElement() {
            return this.head
        }

        getLastElement() {
            return this.tail
        }

        toArray() {
            const nodes = []
            let current = this.head
            while (current) {
                nodes.push(current.data)
                current = current.next
            }
            return nodes
        }

        find(value) {
            if (this.isEmpty()) {
                return null
            }

            let current = this.head
            while (current) {
                if (current.data === value) {
                    return current
                }

                current = current.next
            }

            return null
        }
    }

    const list = new LinkedList()
    list.push(1)
    list.push(2)
    list.push(3)
    list.push(4)
    console.log(list.toArray())

</script>

</html>